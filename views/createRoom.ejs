<%- include('partials/header') %>
<div class="container">
    <div class="titleContainer">
        <h2 class="title">Create Game</h2>
    </div>
    <form method="post" action="" class="roomForm" id="createForm" autocomplete="off">
        <div class="form-group">
            <label for="startPage">Game ID</label>
            <input type="text" id="roomId" name="roomId" maxlength="5" minlength="5" />
        </div>
        <div class="form-group">
            <label for="startPage">Start Page</label>
            <input type="text" id="startPage" name="startPage" />
        </div>
        <div class="form-group">
            <label for="endPage">End Page</label>
            <input type="text" id="endPage" name="endPage" />
        </div>
        <div class="form-group">
            <input type="submit" value="Create Game" />
        </div>

    </form>
</div>
<script>
    $(document).ready(() => {
        let result = "";
        const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
        for (let i = 0; i < 5; i++) {
            result += characters.charAt(
                Math.floor(Math.random() * characters.length)
            );
        }
        $('#roomId').val(result);
    })
    $('#createForm').on('submit', () => {
        const socket = io.connect('http://' + document.domain + ':' + location.port);
        socket.emit("createRoom", {
            roomId: $('#roomId').val(),
            startPage: $('#startPage').val(),
            endPage: $('#endPage').val()
        })
    })
</script>
<%- include('partials/footer') %>